{% extends 'base.html' %}
{% load static %}

{% block title %}Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î“Î­Î½Î½Î·ÏƒÎ·Ï‚ - Î‘ÏƒÏ†Î¬Î»Î¹ÏƒÎ· Î¥Î³ÎµÎ¯Î±Ï‚{% endblock %}

{% block content %}
<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title" style="font-size: 2.5rem; margin-bottom: 1rem;">
                <span style="background: linear-gradient(45deg, #ffffff, #f0f8ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                    Î Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Î· Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î³Î­Î½Î½Î·ÏƒÎ®Ï‚ Ï„Î¿Ï… Î® Ï„Î·Ï‚;
                </span>
            </h1>
            
            <p class="hero-subtitle" style="font-size: 1.2rem; margin-bottom: 2rem;">
                Î•Î¹ÏƒÎ±Î³Î¬Î³ÎµÏ„Îµ Ï„Î·Î½ Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Ï€Î¿Ï… ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ ÏƒÏ„Î·Î½ ÎºÎ¬ÏÏ„Î± Ï…Î³ÎµÎ¯Î±Ï‚ Ï„Î¿Ï… ÎºÎ±Ï„Î¿Î¹ÎºÎ¹Î´Î¹Î¿Ï ÏƒÎ±Ï‚
            </p>
            
            <!-- Pet Info Reminder -->
            <div class="pet-info-reminder" style="margin-bottom: 3rem;">
                <div class="pet-info-card">
                    <div class="pet-icon-small" id="pet-reminder-icon">
                        <!-- Will be filled by JavaScript -->
                    </div>
                    <span class="pet-reminder-text" id="pet-reminder-text">
                        <!-- Will be filled by JavaScript -->
                    </span>
                    <span class="gender-indicator" id="gender-indicator">
                        <!-- Will be filled by JavaScript -->
                    </span>
                </div>
            </div>
            
            <!-- Birth Date Options -->
            <div class="birthdate-options">
                <!-- Exact Date Option -->
                <div class="date-option-card active" id="exact-date-card">
                    <div class="option-header">
                        <div class="option-icon">ğŸ“…</div>
                        <h3 class="option-title">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î³Î­Î½Î½Î·ÏƒÎ·Ï‚</h3>
                    </div>
                    
                    <div class="date-input-container">
                        <div class="date-inputs">
                            <div class="date-field">
                                <input type="number" id="day" min="1" max="31" placeholder="Î—Î—" class="date-input">
                                <label for="day">Î—Î¼Î­ÏÎ±</label>
                            </div>
                            <span class="date-separator">/</span>
                            <div class="date-field">
                                <input type="number" id="month" min="1" max="12" placeholder="ÎœÎœ" class="date-input">
                                <label for="month">ÎœÎ®Î½Î±Ï‚</label>
                            </div>
                            <span class="date-separator">/</span>
                            <div class="date-field">
                                <input type="number" id="year" min="2000" max="2025" placeholder="Î•Î•Î•Î•" class="date-input">
                                <label for="year">ÎˆÏ„Î¿Ï‚</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Approximate Date Option -->
                <div class="date-option-card" id="approximate-date-card">
                    <div class="option-header" onclick="toggleDateOption('approximate')">
                        <div class="option-icon">ğŸ¤”</div>
                        <h3 class="option-title">Î”ÎµÎ½ Î³Î½Ï‰ÏÎ¯Î¶Ï‰ Ï„Î·Î½ Î±ÎºÏÎ¹Î²Î® Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±</h3>
                    </div>
                    
                    <div class="approximate-inputs" style="display: none;">
                        <div class="approximate-selects">
                            <div class="select-field">
                                <select id="approx-month" class="form-select">
                                    <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î®Î½Î±</option>
                                    <option value="1">Î™Î±Î½Î¿Ï…Î¬ÏÎ¹Î¿Ï‚</option>
                                    <option value="2">Î¦ÎµÎ²ÏÎ¿Ï…Î¬ÏÎ¹Î¿Ï‚</option>
                                    <option value="3">ÎœÎ¬ÏÏ„Î¹Î¿Ï‚</option>
                                    <option value="4">Î‘Ï€ÏÎ¯Î»Î¹Î¿Ï‚</option>
                                    <option value="5">ÎœÎ¬Î¹Î¿Ï‚</option>
                                    <option value="6">Î™Î¿ÏÎ½Î¹Î¿Ï‚</option>
                                    <option value="7">Î™Î¿ÏÎ»Î¹Î¿Ï‚</option>
                                    <option value="8">Î‘ÏÎ³Î¿Ï…ÏƒÏ„Î¿Ï‚</option>
                                    <option value="9">Î£ÎµÏ€Ï„Î­Î¼Î²ÏÎ¹Î¿Ï‚</option>
                                    <option value="10">ÎŸÎºÏ„ÏÎ²ÏÎ¹Î¿Ï‚</option>
                                    <option value="11">ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿Ï‚</option>
                                    <option value="12">Î”ÎµÎºÎ­Î¼Î²ÏÎ¹Î¿Ï‚</option>
                                </select>
                                <label>Î ÎµÏÎ¯Ï€Î¿Ï… Î¼Î®Î½Î±Ï‚</label>
                            </div>
                            <div class="select-field">
                                <select id="approx-year" class="form-select">
                                    <option value="">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î­Ï„Î¿Ï‚</option>
                                    <option value="2025">2025</option>
                                    <option value="2024">2024</option>
                                    <option value="2023">2023</option>
                                    <option value="2022">2022</option>
                                    <option value="2021">2021</option>
                                    <option value="2020">2020</option>
                                    <option value="2019">2019</option>
                                    <option value="2018">2018</option>
                                    <option value="2017">2017</option>
                                    <option value="2016">2016</option>
                                    <option value="2015">2015</option>
                                    <option value="2014">2014</option>
                                    <option value="2013">2013</option>
                                    <option value="2012">2012</option>
                                    <option value="2011">2011</option>
                                    <option value="2010">2010</option>
                                </select>
                                <label>Î ÎµÏÎ¯Ï€Î¿Ï… Î­Ï„Î¿Ï‚</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Buttons -->
            <div class="navigation-buttons" style="margin-top: 3rem;">
                <button class="btn btn-lg btn-light me-3" onclick="goBack()" style="padding: 1rem 2rem; border-radius: 15px; font-weight: 600;">
                    <i class="fas fa-arrow-left me-2"></i>
                    Î Î¯ÏƒÏ‰
                </button>
                <button class="btn btn-lg" onclick="submitBirthDate()" style="background: var(--brand-gradient); border: none; color: white; padding: 1rem 2rem; border-radius: 15px; font-weight: 600; box-shadow: var(--shadow-soft);">
                    Î£Ï…Î½Î­Ï‡ÎµÎ¹Î±
                    <i class="fas fa-arrow-right ms-2"></i>
                </button>
            </div>
            
            <!-- Decorative elements -->
            <div class="floating-decorations">
                <div class="floating-element" style="top: 15%; left: 10%; font-size: 2rem;">ğŸ‚</div>
                <div class="floating-element" style="top: 25%; right: 15%; font-size: 1.5rem;">ğŸˆ</div>
                <div class="floating-element" style="bottom: 30%; left: 20%; font-size: 2.5rem;">ğŸ‰</div>
                <div class="floating-element" style="bottom: 20%; right: 10%; font-size: 1.8rem;">ğŸ“…</div>
                <div class="floating-element" style="top: 40%; left: 5%; font-size: 1.2rem;">ğŸ•</div>
                <div class="floating-element" style="top: 60%; right: 5%; font-size: 1.4rem;">â­</div>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get parameters from URL
    const urlParams = new URLSearchParams(window.location.search);
    const petType = urlParams.get('type');
    const gender = urlParams.get('gender');
    
    // Set pet reminder based on selection
    if (petType === 'dog') {
        document.getElementById('pet-reminder-icon').textContent = 'ğŸ•';
        document.getElementById('pet-reminder-text').textContent = 'Î£ÎºÏÎ»Î¿Ï‚';
    } else if (petType === 'cat') {
        document.getElementById('pet-reminder-icon').textContent = 'ğŸ±';
        document.getElementById('pet-reminder-text').textContent = 'Î“Î¬Ï„Î±';
    }
    
    // Set gender indicator
    if (gender === 'male') {
        document.getElementById('gender-indicator').innerHTML = '<span style="color: #4A90E2;">â™‚ï¸ Î‘ÏÏƒÎµÎ½Î¹ÎºÏŒ</span>';
    } else if (gender === 'female') {
        document.getElementById('gender-indicator').innerHTML = '<span style="color: #E24A90;">â™€ï¸ Î˜Î·Î»Ï…ÎºÏŒ</span>';
    }
    
    // Add entrance animations
    const cards = document.querySelectorAll('.date-option-card');
    cards.forEach((card, index) => {
        card.style.animation = `fadeInUp 1s ease-out ${0.3 + index * 0.2}s both`;
    });
    
    // Add input focus animations
    const inputs = document.querySelectorAll('.date-input');
    inputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.parentElement.style.transform = 'scale(1.05)';
            this.parentElement.style.boxShadow = '0 5px 15px rgba(90, 200, 189, 0.3)';
        });
        
        input.addEventListener('blur', function() {
            this.parentElement.style.transform = 'scale(1)';
            this.parentElement.style.boxShadow = 'none';
        });
    });
});

function toggleDateOption(option) {
    const exactCard = document.getElementById('exact-date-card');
    const approximateCard = document.getElementById('approximate-date-card');
    const approximateInputs = document.querySelector('.approximate-inputs');
    
    if (option === 'approximate') {
        exactCard.classList.remove('active');
        approximateCard.classList.add('active');
        approximateInputs.style.display = 'block';
        
        // Animate the appearance
        approximateInputs.style.animation = 'fadeInUp 0.5s ease-out';
    } else {
        approximateCard.classList.remove('active');
        exactCard.classList.add('active');
        approximateInputs.style.display = 'none';
    }
}

function submitBirthDate() {
    const urlParams = new URLSearchParams(window.location.search);
    const petType = urlParams.get('type');
    const gender = urlParams.get('gender');
    
    let birthDate = '';
    
    // Check which option is active
    if (document.getElementById('exact-date-card').classList.contains('active')) {
        const day = document.getElementById('day').value;
        const month = document.getElementById('month').value;
        const year = document.getElementById('year').value;
        
        if (!day || !month || !year) {
            alert('Î Î±ÏÎ±ÎºÎ±Î»Ï ÏƒÏ…Î¼Ï€Î»Î·ÏÏÏƒÏ„Îµ ÏŒÎ»Î± Ï„Î± Ï€ÎµÎ´Î¯Î± Ï„Î·Ï‚ Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±Ï‚.');
            return;
        }
        
        birthDate = `${day}/${month}/${year}`;
    } else {
        const month = document.getElementById('approx-month').value;
        const year = document.getElementById('approx-year').value;
        
        if (!month || !year) {
            alert('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÏ€Î¹Î»Î­Î¾Ï„Îµ Ï„Î¿Ï…Î»Î¬Ï‡Î¹ÏƒÏ„Î¿Î½ Î¼Î®Î½Î± ÎºÎ±Î¹ Î­Ï„Î¿Ï‚.');
            return;
        }
        
        const monthNames = ['', 'Î™Î±Î½Î¿Ï…Î¬ÏÎ¹Î¿Ï‚', 'Î¦ÎµÎ²ÏÎ¿Ï…Î¬ÏÎ¹Î¿Ï‚', 'ÎœÎ¬ÏÏ„Î¹Î¿Ï‚', 'Î‘Ï€ÏÎ¯Î»Î¹Î¿Ï‚', 'ÎœÎ¬Î¹Î¿Ï‚', 'Î™Î¿ÏÎ½Î¹Î¿Ï‚', 'Î™Î¿ÏÎ»Î¹Î¿Ï‚', 'Î‘ÏÎ³Î¿Ï…ÏƒÏ„Î¿Ï‚', 'Î£ÎµÏ€Ï„Î­Î¼Î²ÏÎ¹Î¿Ï‚', 'ÎŸÎºÏ„ÏÎ²ÏÎ¹Î¿Ï‚', 'ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿Ï‚', 'Î”ÎµÎºÎ­Î¼Î²ÏÎ¹Î¿Ï‚'];
        // birthDate = `${monthNames[month]} ${year} (Ï€ÎµÏÎ¯Ï€Î¿Ï…)`;
        // Convert approximate date into a real valid date: 01/MM/YYYY
        birthDate = `01/${month}/${year}`;

    }
    
    // Add success animation
    const button = event.target;
    button.style.transform = 'scale(0.95)';
    button.innerHTML = '<i class="fas fa-check me-2"></i>Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±...';
    
    setTimeout(() => {
        // Navigate to appropriate breed selection page based on pet type
        if (petType === 'dog') {
            window.location.href = `{% url 'main:pet_breed' %}?type=${petType}&gender=${gender}&birthdate=${encodeURIComponent(birthDate)}`;
        } else if (petType === 'cat') {
            window.location.href = `{% url 'main:cat_breed' %}?type=${petType}&gender=${gender}&birthdate=${encodeURIComponent(birthDate)}`;
        }
    }, 1000);
}

function goBack() {
    const content = document.querySelector('.hero-content');
    content.style.animation = 'fadeOut 0.5s ease-in';
    
    setTimeout(() => {
        const urlParams = new URLSearchParams(window.location.search);
        const petType = urlParams.get('type');
        const gender = urlParams.get('gender');
        window.location.href = `{% url "main:pet_gender" %}?type=${petType}`;
    }, 500);
}

// Add click handler to exact date card
document.getElementById('exact-date-card').addEventListener('click', function() {
    if (!this.classList.contains('active')) {
        toggleDateOption('exact');
    }
});
</script>
{% endblock %}
