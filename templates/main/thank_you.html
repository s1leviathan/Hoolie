{% extends 'base.html' %}
{% load static %}

{% block title %}Î•Ï…Ï‡Î±ÏÎ¹ÏƒÏ„Î¿ÏÎ¼Îµ - Hoolie Pet Insurance{% endblock %}

{% block content %}
<section class="hero-section">
    <div class="container">
        <div class="hero-content text-center">
            <!-- Success Animation -->
            <div class="success-animation" style="margin-bottom: 2rem;">
                <div class="success-checkmark">
                    <div class="check-icon">
                        <span class="icon-line line-tip"></span>
                        <span class="icon-line line-long"></span>
                        <div class="icon-circle"></div>
                        <div class="icon-fix"></div>
                    </div>
                </div>
            </div>
            
            <h1 class="hero-title" style="font-size: 3rem; margin-bottom: 1rem;">
                <span style="background: linear-gradient(45deg, #ffffff, #f0f8ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                    Î•Ï…Ï‡Î±ÏÎ¹ÏƒÏ„Î¿ÏÎ¼Îµ! ğŸ‰
                </span>
            </h1>
            
            <p class="hero-subtitle" style="font-size: 1.3rem; margin-bottom: 1rem; opacity: 0.9;">
                Î— Î±Î¯Ï„Î·ÏƒÎ® ÏƒÎ±Ï‚ Î³Î¹Î± Î±ÏƒÏ†Î¬Î»Î¹ÏƒÎ· <span id="pet-name-in-subtitle">Ï„Î¿Ï… ÎºÎ±Ï„Î¿Î¹ÎºÎ¹Î´Î¹Î¿Ï ÏƒÎ±Ï‚</span> Ï…Ï€Î¿Î²Î»Î®Î¸Î·ÎºÎµ Î¼Îµ ÎµÏ€Î¹Ï„Ï…Ï‡Î¯Î±!
            </p>
            
            <!-- Application Number Display - Right under success message -->
            {% if application_number %}
            <div class="application-number-display" style="margin-bottom: 2rem;">
                <p style="font-size: 1.1rem; color: rgba(255, 255, 255, 0.9); margin-bottom: 0.5rem;">
                    Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î‘Î¯Ï„Î·ÏƒÎ·Ï‚: <strong style="color: #ffffff; font-size: 1.3rem; letter-spacing: 1px;">{{ application_number }}</strong>
                </p>
            </div>
            {% endif %}
            
            <!-- Confirmation Details -->
            <div class="confirmation-card">
                <div class="confirmation-header">
                    <h3 style="color: #2c3e50; margin-bottom: 1.5rem; font-weight: 600;">
                        ğŸ“‹ Î¤Î¹ ÏƒÏ…Î¼Î²Î±Î¯Î½ÎµÎ¹ Ï„ÏÏÎ±;
                    </h3>
                </div>
                
                <div class="confirmation-steps">
                    <div class="step-item">
                        <div class="step-icon">ğŸ“§</div>
                        <div class="step-content">
                            <h4>Email Î•Ï€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·Ï‚</h4>
                            <p>Î˜Î± Î»Î¬Î²ÎµÏ„Îµ Î­Î½Î± email ÎµÏ€Î¹Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·Ï‚ ÏƒÏ„Î¿ <strong id="user-email">{% if email %}{{ email }}{% else %}email ÏƒÎ±Ï‚{% endif %}</strong> ÎµÎ½Ï„ÏŒÏ‚ Î»Î¯Î³Ï‰Î½ Î»ÎµÏ€Ï„ÏÎ½</p>
                        </div>
                    </div>
                    
                    <div class="step-item">
                        <div class="step-icon">â³</div>
                        <div class="step-content">
                            <h4>Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± Î‘Î¯Ï„Î·ÏƒÎ·Ï‚</h4>
                            <p>Î— Î±Î¯Ï„Î·ÏƒÎ® ÏƒÎ±Ï‚ Î¼Îµ Î±ÏÎ¹Î¸Î¼ÏŒ <strong>{% if application %}{{ application.contract_number|default:application.application_number }}{% elif application_number %}{{ application_number }}{% else %}HPI10001{% endif %}</strong> Î²ÏÎ¯ÏƒÎºÎµÏ„Î±Î¹ ÏƒÎµ ÎµÏ€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î± ÎºÎ±Î¹ Î¸Î± ÎµÎ»ÎµÎ³Ï‡Î¸ÎµÎ¯ Î±Ï€ÏŒ Ï„Î¿ Ï„Î¼Î®Î¼Î± Underwriting</p>
                        </div>
                    </div>
                    
                    <div class="step-item">
                        <div class="step-icon">ğŸ“</div>
                        <div class="step-content">
                            <h4>Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î± Î±Ï€ÏŒ Ï„Î·Î½ Î¿Î¼Î¬Î´Î± Î¼Î±Ï‚</h4>
                            <p>Î˜Î± Î»Î¬Î²ÎµÏ„Îµ ÎµÎ½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î¼Î­ÏƒÏ‰ email ÎµÎ½Ï„ÏŒÏ‚ 48 Ï‰ÏÏÎ½ Î³Î¹Î± Ï„Î·Î½ ÎµÎ¾Î­Î»Î¹Î¾Î· Ï„Î·Ï‚ Î±Î¯Ï„Î·ÏƒÎ®Ï‚ ÏƒÎ±Ï‚</p>
                        </div>
                    </div>
                    
                    <div class="step-item">
                        <div class="step-icon">âœ…</div>
                        <div class="step-content">
                            <h4>ÎˆÎºÎ´Î¿ÏƒÎ· Î£Ï…Î¼Î²Î¿Î»Î±Î¯Î¿Ï…</h4>
                            <p>ÎœÎµÏ„Î¬ Ï„Î·Î½ Î­Î³ÎºÏÎ¹ÏƒÎ·, Î¸Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÎ¿Ï…Î¼Îµ Î¼Î±Î¶Î¯ ÏƒÎ±Ï‚ Î³Î¹Î± Ï„Î·Î½ Î­ÎºÎ´Î¿ÏƒÎ· Ï„Î¿Ï… ÏƒÏ…Î¼Î²Î¿Î»Î±Î¯Î¿Ï…</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pet Info Summary -->
            <div class="final-pet-summary" style="margin: 3rem 0;">
                <h4 style="color: #ffffff; margin-bottom: 1rem; opacity: 0.9;">Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î‘Î¯Ï„Î·ÏƒÎ·Ï‚</h4>
                <div class="pet-info-card">
                    <div class="pet-icon-small" id="pet-avatar">ğŸ•</div>
                    <span class="pet-reminder-text" id="pet-name-display">Î¤Î¿ ÎºÎ±Ï„Î¿Î¹ÎºÎ¯Î´Î¹ÏŒ ÏƒÎ±Ï‚</span>
                    <span class="gender-indicator" id="pet-gender-display">
                        <span style="color: #4A90E2;">â™‚ï¸ Î‘ÏÏƒÎµÎ½Î¹ÎºÏŒ</span>
                    </span>
                </div>
                <div style="text-align: center; margin-top: 1rem;">
                    <span style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem;">
                        ğŸ“§ Email: <strong id="contact-email" style="color: #ffffff;">email@example.com</strong>
                    </span>
                </div>
            </div>
            
            <!-- Call to Action -->
            <div class="cta-section" style="margin-top: 3rem;">
                <p style="font-size: 1.1rem; color: #7f8c8d; margin-bottom: 2rem;">
                    ÎˆÏ‡ÎµÏ„Îµ Î¬Î»Î»Î¿ ÎºÎ±Ï„Î¿Î¹ÎºÎ¯Î´Î¹Î¿; Î›Î¬Î²ÎµÏ„Îµ 5% Î­ÎºÏ€Ï„Ï‰ÏƒÎ· Î³Î¹Î± ÎºÎ¬Î¸Îµ ÎµÏ€Î¹Ï€Î»Î­Î¿Î½ Î±ÏƒÏ†Î¬Î»Î¹ÏƒÎ·!
                </p>
                
                <div class="action-buttons">
                    <button class="btn btn-primary btn-lg me-3" onclick="startNewApplication()" style="padding: 1rem 2rem; border-radius: 15px; font-weight: 600;">
                        ğŸ¾ Î‘ÏƒÏ†Î¬Î»Î¹ÏƒÎ· Î¬Î»Î»Î¿Ï… ÎºÎ±Ï„Î¿Î¹ÎºÎ¹Î´Î¹Î¿Ï
                    </button>
                    
                    <button class="btn btn-outline-light btn-lg" onclick="goHome()" style="padding: 1rem 2rem; border-radius: 15px; font-weight: 600;">
                        ğŸ  Î‘ÏÏ‡Î¹ÎºÎ® ÏƒÎµÎ»Î¯Î´Î±
                    </button>
                </div>
            </div>
            
            <!-- Contact Info -->
            <div class="contact-info" style="margin-top: 4rem; padding: 2rem; background: rgba(255,255,255,0.1); border-radius: 20px;">
                <h5 style="color: #ffffff; margin-bottom: 1rem;">Î§ÏÎµÎ¹Î¬Î¶ÎµÏƒÏ„Îµ Î²Î¿Î®Î¸ÎµÎ¹Î±;</h5>
                <p style="color: #e8f4f8; margin-bottom: 0;">
                    ğŸ“ Î¤Î·Î»Î­Ï†Ï‰Î½Î¿: 210-1234567 | ğŸ“§ Email: info@hoolie.gr
                </p>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get parameters from URL or use template variables
    const urlParams = new URLSearchParams(window.location.search);
    const petType = urlParams.get('type') || '{{ pet_type|default:"" }}';
    const name = urlParams.get('name') || '{{ pet_name|default:"" }}';
    const email = urlParams.get('email') || '{{ email|default:"" }}';
    
    // Set pet avatar
    if (petType === 'dog') {
        const avatar = document.getElementById('pet-avatar');
        if (avatar) avatar.textContent = 'ğŸ•';
    } else if (petType === 'cat') {
        const avatar = document.getElementById('pet-avatar');
        if (avatar) avatar.textContent = 'ğŸ±';
    }
    
    // Set pet name
    if (name) {
        const petName = decodeURIComponent(name);
        const nameDisplay = document.getElementById('pet-name-display');
        if (nameDisplay) nameDisplay.textContent = petName;
        
        // Update subtitle to include pet name
        const subtitle = document.getElementById('pet-name-in-subtitle');
        if (subtitle) subtitle.textContent = `Ï„Î¿Ï… ${petName}`;
    }
    
    // Set email
    if (email) {
        const userEmail = decodeURIComponent(email);
        const emailElement = document.getElementById('user-email');
        if (emailElement) emailElement.textContent = userEmail;
        const contactEmail = document.getElementById('contact-email');
        if (contactEmail) contactEmail.textContent = userEmail;
    }
    
    // Trigger success animation
    setTimeout(() => {
        const checkmark = document.querySelector('.success-checkmark');
        if (checkmark) checkmark.classList.add('animate');
    }, 500);
});

function startNewApplication() {
    window.location.href = '{% url "main:index" %}';
}

function goHome() {
    window.location.href = '{% url "main:index" %}';
}
</script>
{% endblock %}
