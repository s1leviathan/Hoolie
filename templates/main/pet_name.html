{% extends 'base.html' %}
{% load static %}

{% block title %}ÎŒÎ½Î¿Î¼Î± ÎšÎ±Ï„Î¿Î¹ÎºÎ¹Î´Î¯Î¿Ï… - Î‘ÏƒÏ†Î¬Î»Î¹ÏƒÎ· Î¥Î³ÎµÎ¯Î±Ï‚{% endblock %}

{% block content %}
<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title" style="font-size: 2.8rem; margin-bottom: 2rem;">
                <span style="background: linear-gradient(45deg, #ffffff, #f0f8ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                    Î Î¿Î¹Î¿ ÎµÎ¯Î½Î±Î¹ Ï„Î¿ ÏŒÎ½Î¿Î¼Î± Ï„Î¿Ï… ÎºÎ±Ï„Î¿Î¹ÎºÎ¹Î´Î¹Î¿Ï ÏƒÎ±Ï‚;
                </span>
            </h1>
            
            <!-- Pet Info Card -->
            <div class="pet-info-card" style="margin-bottom: 3rem;">
                <div class="pet-icon-small" id="pet-avatar">ğŸ•</div>
                <span class="pet-reminder-text" id="pet-type-display">Î£ÎºÏÎ»Î¿Ï‚</span>
                <span class="gender-indicator" id="pet-gender-display">
                    <span style="color: #4A90E2;">â™‚ï¸ Î‘ÏÏƒÎµÎ½Î¹ÎºÏŒ</span>
                </span>
            </div>
            
            <!-- Name Input Section -->
            <div class="name-input-section">
                <div class="name-input-card">
                    <div class="input-header">
                        <div class="input-icon">âœ¨</div>
                        <h3 class="input-title">Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Î¾Î­ÏÎ¿Ï…Î¼Îµ Ï€Ï‰Ï‚ Î¸Î± Î±Ï€Î¿ÎºÎ±Î»Î¿ÏÎ¼Îµ Ï„Î¿Î½ Ï„ÎµÏ„ÏÎ¬Ï€Î¿Î´Î¿ ÏƒÏÎ½Ï„ÏÎ¿Ï†ÏŒ ÏƒÎ±Ï‚</h3>
                    </div>
                    
                    <div class="name-input-container">
                        <div class="name-field">
                            <input type="text" id="pet-name-input" class="pet-name-input" placeholder="Î•Î¹ÏƒÎ±Î³Î¬Î³ÎµÏ„Îµ Ï„Î¿ ÏŒÎ½Î¿Î¼Î±..." maxlength="50">
                            <div class="input-underline"></div>
                        </div>
                        <div class="name-suggestions" id="name-suggestions">
                            <p class="suggestions-title">Î£Ï…Ï‡Î½Î¬ Î¿Î½ÏŒÎ¼Î±Ï„Î±:</p>
                            <div class="suggestions-list" id="suggestions-list">
                                <!-- Will be filled by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation Buttons -->
            <div class="navigation-buttons" style="margin-top: 3rem;">
                <button class="btn btn-lg btn-light me-3" onclick="goBack()" style="padding: 1rem 2rem; border-radius: 15px; font-weight: 600;">
                    <i class="fas fa-arrow-left me-2"></i>
                    Î Î¯ÏƒÏ‰
                </button>
                <button class="btn btn-lg" onclick="submitName()" style="background: var(--brand-gradient); border: none; color: white; padding: 1rem 2rem; border-radius: 15px; font-weight: 600; box-shadow: var(--shadow-soft);">
                    Î•Ï€ÏŒÎ¼ÎµÎ½Î¿
                    <i class="fas fa-arrow-right ms-2"></i>
                </button>
            </div>
            
            <!-- Decorative elements -->
            <div class="floating-decorations">
                <div class="floating-element" style="top: 15%; left: 10%; font-size: 2rem;">ğŸ’«</div>
                <div class="floating-element" style="top: 25%; right: 15%; font-size: 1.5rem;">ğŸŒŸ</div>
                <div class="floating-element" style="bottom: 30%; left: 20%; font-size: 2.5rem;">âœ¨</div>
                <div class="floating-element" style="bottom: 20%; right: 10%; font-size: 1.8rem;">ğŸ’–</div>
                <div class="floating-element" style="top: 40%; left: 5%; font-size: 1.2rem;">ğŸ­</div>
                <div class="floating-element" style="top: 60%; right: 5%; font-size: 1.4rem;">ğŸª</div>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get parameters from URL
    const urlParams = new URLSearchParams(window.location.search);
    const petType = urlParams.get('type');
    const gender = urlParams.get('gender');
    const birthdate = urlParams.get('birthdate');
    const breed = urlParams.get('breed');
    
    // Set pet summary information
    if (petType === 'dog') {
        document.getElementById('pet-avatar').textContent = 'ğŸ•';
        document.getElementById('pet-type-display').textContent = 'Î£ÎºÏÎ»Î¿Ï‚';
    } else if (petType === 'cat') {
        document.getElementById('pet-avatar').textContent = 'ğŸ±';
        document.getElementById('pet-type-display').textContent = 'Î“Î¬Ï„Î±';
    }
    
    // Set gender display
    if (gender === 'male') {
        document.getElementById('pet-gender-display').innerHTML = '<span style="color: #4A90E2;">â™‚ï¸ Î‘ÏÏƒÎµÎ½Î¹ÎºÏŒ</span>';
    } else if (gender === 'female') {
        document.getElementById('pet-gender-display').innerHTML = '<span style="color: #E91E63;">â™€ï¸ Î˜Î·Î»Ï…ÎºÏŒ</span>';
    }
    
    // Generate name suggestions based on pet type and gender
    generateNameSuggestions(petType, gender);
    
    // Add entrance animations
    const cards = document.querySelectorAll('.pet-summary-card, .name-input-card');
    cards.forEach((card, index) => {
        card.style.animation = `fadeInUp 1s ease-out ${0.3 + index * 0.2}s both`;
    });
    
    // Add input focus effects
    const nameInput = document.getElementById('pet-name-input');
    nameInput.addEventListener('focus', function() {
        this.parentElement.style.transform = 'scale(1.02)';
        document.querySelector('.input-underline').style.width = '100%';
    });
    
    nameInput.addEventListener('blur', function() {
        this.parentElement.style.transform = 'scale(1)';
        if (!this.value) {
            document.querySelector('.input-underline').style.width = '0%';
        }
    });
    
    // Add real-time validation
    nameInput.addEventListener('input', function() {
        const value = this.value.trim();
        if (value.length > 0) {
            this.style.color = 'var(--brand-primary)';
            this.style.fontWeight = '600';
        } else {
            this.style.color = '';
            this.style.fontWeight = '';
        }
    });
});

function generateNameSuggestions(petType, gender) {
    let suggestions = [];
    
    if (petType === 'dog') {
        if (gender === 'male') {
            suggestions = ['ÎœÎ¬Î¾', 'Î¡Î­Î¾', 'ÎœÏ€Î¬Î½Ï„Î¹', 'Î¤ÏƒÎ¬ÏÎ»Î¹', 'Î¡ÏŒÎºÎ¹', 'Î›Î¿ÏÎºÎ±Ï‚'];
        } else {
            suggestions = ['ÎœÏ€Î­Î»Î»Î±', 'Î›Î¿ÏÎ½Î±', 'ÎœÏŒÎ»Î¹', 'Î£ÏŒÏ†Î¹', 'ÎÏ„Î­Î¹Î¶Î¹', 'Î¡Î¿ÏÎ¼Ï€Î¹'];
        }
    } else if (petType === 'cat') {
        if (gender === 'male') {
            suggestions = ['ÎœÎ¯Î»Î¿', 'Î¦Î­Î»Î¹Î¾', 'ÎŒÏƒÎºÎ±Ï', 'Î¤Î¯Î³ÎºÎµÏ', 'Î£Î¯Î¼Ï€Î±', 'Î›Î­Î¿'];
        } else {
            suggestions = ['Î›Î¿ÏÎ½Î±', 'ÎšÎ»ÏŒÎµ', 'ÎÎ¬Î»Î±', 'ÎœÎ¯Î±', 'ÎšÎ¯Ï„Î¹', 'Î–ÏŒÎµ'];
        }
    }
    
    const suggestionsList = document.getElementById('suggestions-list');
    suggestions.forEach((name, index) => {
        const suggestion = document.createElement('span');
        suggestion.className = 'name-suggestion';
        suggestion.textContent = name;
        suggestion.onclick = () => selectSuggestion(name);
        suggestion.style.animationDelay = `${0.1 * index}s`;
        suggestionsList.appendChild(suggestion);
    });
}

function selectSuggestion(name) {
    const input = document.getElementById('pet-name-input');
    input.value = name;
    input.style.color = 'var(--brand-primary)';
    input.style.fontWeight = '600';
    
    // Add selection animation
    const suggestions = document.querySelectorAll('.name-suggestion');
    suggestions.forEach(s => s.classList.remove('selected'));
    event.target.classList.add('selected');
    
    // Trigger input animation
    document.querySelector('.input-underline').style.width = '100%';
}

function submitName() {
    const petName = document.getElementById('pet-name-input').value.trim();
    
    if (!petName) {
        alert('Î Î±ÏÎ±ÎºÎ±Î»Ï ÎµÎ¹ÏƒÎ±Î³Î¬Î³ÎµÏ„Îµ Î­Î½Î± ÏŒÎ½Î¿Î¼Î± Î³Î¹Î± Ï„Î¿ ÎºÎ±Ï„Î¿Î¹ÎºÎ¯Î´Î¹ÏŒ ÏƒÎ±Ï‚.');
        document.getElementById('pet-name-input').focus();
        return;
    }
    
    if (petName.length < 2) {
        alert('Î¤Î¿ ÏŒÎ½Î¿Î¼Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î­Ï‡ÎµÎ¹ Ï„Î¿Ï…Î»Î¬Ï‡Î¹ÏƒÏ„Î¿Î½ 2 Ï‡Î±ÏÎ±ÎºÏ„Î®ÏÎµÏ‚.');
        document.getElementById('pet-name-input').focus();
        return;
    }
    
    // Get all parameters
    const urlParams = new URLSearchParams(window.location.search);
    const petType = urlParams.get('type');
    const gender = urlParams.get('gender');
    const birthdate = urlParams.get('birthdate');
    const breed = urlParams.get('breed');
    
    // Add success animation
    const button = event.target;
    button.style.transform = 'scale(0.95)';
    button.innerHTML = '<i class="fas fa-check me-2"></i>Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±...';
    
     setTimeout(() => {
         // Navigate to document upload page
         window.location.href = `{% url 'main:pet_documents' %}?type=${petType}&gender=${gender}&birthdate=${encodeURIComponent(birthdate)}&breed=${encodeURIComponent(breed)}&name=${encodeURIComponent(petName)}`;
     }, 1000);
}

function goBack() {
    const content = document.querySelector('.hero-content');
    content.style.animation = 'fadeOut 0.5s ease-in';
    
    setTimeout(() => {
        const urlParams = new URLSearchParams(window.location.search);
        const petType = urlParams.get('type');
        const gender = urlParams.get('gender');
        const birthdate = urlParams.get('birthdate');
        
        // Navigate back to appropriate breed page
        if (petType === 'dog') {
            window.location.href = `{% url "main:pet_breed" %}?type=${petType}&gender=${gender}&birthdate=${encodeURIComponent(birthdate)}`;
        } else if (petType === 'cat') {
            window.location.href = `{% url "main:cat_breed" %}?type=${petType}&gender=${gender}&birthdate=${encodeURIComponent(birthdate)}`;
        }
    }, 500);
}
</script>
{% endblock %}
